#!/bin/bash

# Metadata:
# <xbar.title>wttr.in</xbar.title>
# <xbar.version>v1.0</xbar.version>
# <xbar.author>kawarimidoll</xbar.author>
# <xbar.author.github>kawarimidoll</xbar.author.github>
# <xbar.desc>Show current weather using wttr.in.</xbar.desc>
# <xbar.image>iVBORw0KGgoAAAANSUhEUgAAAJYAAAAiCAYAAAC9WiCBAAABRGlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAwiDEwAGE7InJxQWOAQE+QCUMMBoVfLvGwAiiL+uCzNrEtXEhT9eKAzpH7AuiTdb5YapHAVwpqcXJQPoPEKclFxSVMDAwpgDZyuUlBSB2B5AtUgR0FJA9B8ROh7A3gNhJEPYRsJqQIGcg+waQLZCckQg0g/EFkK2ThCSejsSG2gsCPD7uCh4uQQrhgR4uBJxLOihJrSgB0c75BZVFmekZJQqOwFBKVfDMS9bTUTAyMDJkYACFOUT15xvgsGQU40CIFYgxMFjMAAo+RIjFA/2wXY6Bgb8PIaYG9K+AFwPDwX0FiUWJcAcwfmMpTjM2grC5tzMwsE77//9zOAMDuyYDw9/r////3v7//99lDAzMtxgYDnwDAPthX5WublckAAAAVmVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAADkoYABwAAABIAAABEoAIABAAAAAEAAACWoAMABAAAAAEAAAAiAAAAAEFTQ0lJAAAAU2NyZWVuc2hvdAeeWzQAAAHVaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjM0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjE1MDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlVzZXJDb21tZW50PlNjcmVlbnNob3Q8L2V4aWY6VXNlckNvbW1lbnQ+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpafv6xAAAK2UlEQVR4Ae1bB2xUxxY9b71eVzDu9BpC6F+QT0IJvSt0kOgyEQhIAAWEBEIJ+iBaJIQSkKKImtAkFClIoCQQQgmE5IPoLZQApvjj3rB3vestf87AbJ7tXeNlbZOgd6Xd997MnTvz7j1zy6ytPXz40AODDA1UswZM1SzPEGdoQGrAAJYBhBrRgAGsGlErUGq1oqQwH26ns4Zm+HuLNYBVQ/ZxFl6Fp+A44MqvoRn+3mINYFWDfVz2IrhLCuBxu7zSIj0ZqOdJhWZnu1u2u0ttcFvz4HG9/l4sZOHChf/xaiOAm6ysLBw+fBgnTpyAw+FAo0aNYDL9PXCam5uL6dOno1WrVmjYsGEAb/VyrNbsNESUHkaYKxUeczJcxUXwPM2Hyx4JtzsKiIhBSPE1hDsOozjPBi08CabQsJebTDeK73no0CEcO3YMThFymzRpousFiouL8cMPP+DcuXNSD5GRkWX6XS6XHBcSElKmnQ/B2velkLB37168/fbbWL16NX766SekpKRgypQpyMvLq7DA2mi4ePEixo8fD4/n2cmJpmngp7YoPK4RPFYznE8y4Xl4EnVLv0fDlhlo3NmD5MRzsGQehPvhdTj/lwNTWLIAVVkDv8w6U1NTMXz4cGzatAlnzpzBtGnTsGLFCq+onJwc9OzZE2vXrsWOHTvQrVs3XL161dtPG3bs2BEdOnTA+vXrve28qQ77aoGeY126dAnjxo3Dhx9+iEWLFkkD3r59GxMnTsSYMWPw6aeflllkbTzQa9JDUdmvymu6bFZo2acRX/8KIhPrw4RowC3AHSo0UJqKrNuhKNb6QotrJYBlqbJaSktLce/ePbRp06bMGIKInmj//v0wm83Ys2eP1D3BExUVBRGJJJAYVeiRaK/79+9LD0ZP1a5dO2zevBkNGjTAsGHDcPr0aXlfXfYN2GPxRd544w25cOUV3nzzTXzyySdejzVr1izs3LnTq4jffvsNffv2lc82mw3du3fH9u3b0b9/f7z11lv44IMPkJ6e7uXn/ezZs9G+fXsMGjSojCyCefny5Rg1ahRatmyJH3/8Ua6Fg3v06IEtW7aAiuMcV65ckTI5ZuXKlRL8nG/mzJm4du2ad74jR47ITcH34OZgeFF069YtbN26VT36v5bkISbyAiIsmdAKLsGT+4tM3j1ZJwBbGmJi/4C59C7gLPEvw0fPgwcPpA74Tnpq3bq13NgEFalLly4yrD158kQ+M5JQhyrMffTRR7h+/TrS0tJkiLTb7dJbUYcMkQyrpKrYVzK+4CtgYHFHvPvuuxU8w9ixY7FhwwY5HeNzYWGhd+qSkhL5Qmxwi0SWL7dx40YsXboU33zzDTIzM6Wx2U8FMrQyP9i9e7ds5+5UxqaL5+4kAL777jv06tULixcv5lApi96UIZFzMPcjcQznmTBhgrzyWa318uXLmDNnjgwblNe7d2+5uy9cuCDHfvvtt1i1apWUIRt0X26nXYDoGjwPjgCpJ2EuSoeWlwV3YTbctjyRqIvjBlsu3DnpCC0pQkjOVZgEryn9ONxFafA4n61PJ7LKt5MnT0a/fv28/Pv27UPTpk3RokULZGdn4+nTp2W8HDcNvfndu3cRExODESNGYPTo0TKcEqRt27aVsqpiX++kldw8g3slDOW7Hj9+jCFDhpRvDviZYBg8eLAc99lnn0l3TNkE5I0bN3D06FHEx8ejWbNmElQHDx7E0KFDJf/IkSMl+NSkLBxIVBCVx0S2PDEfIehI9JAff/yxBDFDRadOnbzgZM7BsMB2eoElS5bIubiW8uSxWxGWfwWewnTYbRa48+0CzDYgUiTD9CTctqwIbcLb2OxAQTEsUQ8Rqt1FsStMJPp1BJ/vsHj8+HG5Qe7cuSOnZYJO7xMRESG9sX4tBNWuXbvkRiRPRkaG7I6Li/OyhYaGIjo6Wm5iNn7xxRcylHLzMf9SKUR12TdgYDEMMuYHS9xBiggIEneTKgDoARUVFBTIsKieExMT1W2Vr8wlFLFSZO5C70jD8Z30xGfmjSQapHHjxvpu731IVCyslvFA3XyRuN+AI+s6TCUOkcib4AkTYCKw7C5oxQLoJS44TLFwx/eHKaE5tIhoaAIEvogel+GeV5EDSxY+EzRcC8O8IqYCy5Ytw+eff+5tV9UhAabWzhSEm1b1UdY777yjxHiv1WXfgIHFSuLAgQMoKiqSO0CtiGHk/PnzslLkoumOFenDompj7sCdQnr06JG80jvRTTN3+/3338vIlwwv+FJV4QvYynQzdDAc6onGZC5WFZKJeGwSQqMFyPKuI6zgFxEKrXCyKnWLKtXpRrhJQ5EjGZ7O/RHSuINfQKn5+P6nTp2Sj3/++afMRX/99VdvvqT4Tp48iQULFmDdunUytKn2unXrIiEhQdqja9euspm2IZXfRLJR91UV++rY/d4GnGPNmDFDhpq5c+eCZT69CUHF5D0pKUlOxMX//PPPMnlmpcbqozyxxGUFwkqFY2lgAovVCr0L8y+6ZXoUHiWwbPZHycnJsou7l7lZIMQC4uzZs95cj3kdi40BAwZIMTQek//yybN+DgLamX4NpeENkO8WgLSHwWxzIkR4KYuoDIuscbDW6QJX4SM4i3O9xyJ6GYHesyKcOnUqJk2aJI8Nbt68CX7UJk5JScGXX34pbcBNzKMhpgMEXGVUFftWNl71BQys+vXr4+uvv5bJIcMVEU4QMG+ZN2+elDt//nwZQt5//32ZF3H3qxiuJmbyyLOvPn36yPC3bds26aksFovMFwg4JuYDBw5EnTp1ZEKtxpa/MvEkEFj5fPXVV+W7KzyrapZXFiJUOsfxbI7nQkzWeQZEojdjvkUP7Y9sedmwCE8V5f4DrrajkNdgGvLNPfBU+xdywgfC2nkRQkX4jnH9F66Mq+Lg1OpPVIV2VmzvvfdehXM5Fj8k2oK5qvowFyNRF6ySmaBzPOWsWbNG9lX2VRX7VjZe9QV8jqUG8srdwQqwefPmFdw0+5kvERSqJGYbPQqBwGSciTKf6bp9EfsISCasVSEmopyrPIirMpY8+fn5qFevXgV2eiuGd3/kyElDSOFdcaKeKPKnFnCZxOHV/RPitD0djvrdYU5oBk38lIPcO3CawhGSJCq0MHEiXwvEiMKjBRVNApnyRfatTFbAOZZeGAHhDxTki42N1bNXuKexKhvPg75AiN4uGPIFKsqrDFTst8Q1BOKfVaZ8NonQ6HKI3wjtj2EWGNPE5tDqiBAkPmbRpzwmeWuamLO+LL3IvpXJDQpYlQn210fvw8NT/o732pAIqXoicBwJ/4bD0grREUkw6/prE1T6NdX2fVChsLYXa8z3z9FAwMn7P+fVjJW+Sg0YwHqV2n+N5zaA9Rob91W+mgGsV6n913huUc5owf9foSqK/EpiB6d6rkm/fH+xSRZRmv816PlYdXkuS4lUzeWvz+SUb62BZy5E/15qYc/bdIXhM7bnr6bYuCL9cJ8r1DPoBypmfb9qU3y++hSPryvH6cf4e1byKUPHr4lDRQ8PFfnnLDxYZDmsfr7gTxX6Np7nkE/K0J3HkI/jVCnNK//CQMlV/RyvDhsph+28Kj79XGoOfZsx/z9H/5r4ux0dziRmjC9DA0FrwMixglahIcCXBgxg+dKK0Ra0BgxgBa1CQ4AvDRjA8qUVoy1oDRjAClqFhgBfGjCA5UsrRlvQGjCAFbQKDQG+NPB/nPldU/BAfL4AAAAASUVORK5CYII=</xbar.image>
# <xbar.dependencies>curl</xbar.dependencies>

# Variables:
# <xbar.var>string(VAR_LOCATION="Cupertino"): Your location.</xbar.var>
# <xbar.var>string(VAR_FORMAT="3"): Display format. Ref: https://github.com/chubin/wttr.in#one-line-output</xbar.var>

curl "wttr.in/${VAR_LOCATION}?format=${VAR_FORMAT}"
