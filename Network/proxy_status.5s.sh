#!/bin/bash
#
# Proxy Status and toggler
#
# <xbar.title>Proxy Status</xbar.title>
# <xbar.version>v1.0</xbar.version>
# <xbar.author>Cameron Currie</xbar.author>
# <xbar.author.github>cwc</xbar.author.github>
# <xbar.desc>Displays proxy status and allows toggling it on and off.</xbar.desc>
# <xbar.image>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</xbar.image>

interface="wi-fi" # You can also set this to e.g. "ethernet"

proxy_type="SOCKS"
proxy_get="-getsocksfirewallproxy"
proxy_set="-setsocksfirewallproxystate"

state=$(networksetup $proxy_get $interface | grep "No")

if [ "$1" = 'toggle' ]; then
    # Prompts for the user's password, then toggles the SOCKS proxy state
  if [ -n "$state" ]; then
    networksetup $proxy_set $interface on
  else
    networksetup $proxy_set $interface off
  fi

  exit
fi

if [ -n "$state" ]; then
  state_icon="☐"
  action_toggle="Enable"
else
  state_icon="☑"
  action_toggle="Disable"
fi

echo "$state_icon $proxy_type | dropdown=false"

echo "---"

echo "$action_toggle Proxy | bash='$0' param1=toggle terminal=false refresh=true"
