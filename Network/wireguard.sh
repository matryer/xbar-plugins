#!/bin/bash
# <xbar.title>Wireguard</xbar.title>
# <xbar.version>v1.0</xbar.version>
# <xbar.author>Daniel Barber</xbar.author>
# <xbar.author.github>danbee</xbar.author.github>
# <xbar.desc>Manages a Wireguard VPN connection</xbar.desc>
# <xbar.image>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</xbar.image>
# <xbar.dependencies></xbar.dependencies>

# You will need to add the following line to your sudoers file. Remember to edit
# sudoers with `sudo visudo`.
#
# %admin  ALL=(ALL) NOPASSWD: /usr/local/bin/wg-quick
#
# Rename WG_CONFIG if your Wireguard config is not called `wg0-client`

PATH="/usr/local/bin:$PATH"

WG_CONNECTED="iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAY1BMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////Iv5pwAAAAH3RSTlMAA0yMvd6sez0V7/qzbglj5qR0Ncj1KA7VLlQflkGEXYPQGAAAAAFiS0dEILNrPYAAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAAHdElNRQfiCB0GISSxSlkqAAABpklEQVQ4y2VT7YKEIAik1GyzTNus1nbz/d/y8AO3u+OXIMLMgABkTcu4EJ1kvJN9A3/twYYQghqnHvQ8BMMev+/neB2sZEt8++SrcvJWpbEhmdiy3wL0IfBapOlCMZkDezsL9A7KWMq1aVPVThhzpADPXTZVEpzgL/Q9+VRxrX44WB8xCvJdbNKHu6klYhjvJSrCsE7PrbV2R9iUITCbOqo5Qz7fmPEYSrQHT+99FfV9qyvhXU42jcPja/hsX+pj5fDEp8h+QKIPLCYrCFMQ4EuWxMkVqLADV1TEhLEcIjeSQgEdUNUrHrpmRnU+lTsQyw+ARuhumTWireq6WmuMDL31GghNAcnpiDpNrySEnkxNGCvcEK4p7Yv2vtlIyMCqkmaScZInW8/YK1RoZRajhileIOsB8ZI8pinsD8SGIHZH0dI5jiVRZpIPKHCbwy+ahUqoaPa+Ls9Js2B5AQYCDM1RxgGWGkfr8zwEtj5Rlg5HrmPInLQifcY8pT9RpTy279c6Ew7V1p+ITty8m3061ENde9654Ozr3//ePeOHsNfCxsvrGv4BOvFCaHw59FkAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDgtMjlUMTA6MzM6MzYtMDQ6MDCYYoC0AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA4LTI5VDEwOjMzOjM2LTA0OjAw6T84CAAAAABJRU5ErkJggg=="
WG_DISCONNECTED="iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAY1BMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////Iv5pwAAAAIHRSTlMAAhsxQk09K0Q6FgEHVFk/JVEoEklWDyAKBBkNHTUfLpaxL30AAAABYktHRCCzaz2AAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAB3RJTUUH4ggdBiEgtiedMwAAAaFJREFUOMtdU1GigyAMKyIiKihOVDY373/LVypl7vVHSjFNEwDgEJWslWq0bI3uevgfg7QOY5w6EJN1Xg6/9YnKRstZYPaolxD0DUUYR6HWK68AOufaAtI3LofO/apNYbbwiTmXfUWojfJe0UYtqL6GfCCo+oH5xjkjLiV3i+wSR8V52IHo3GPGrTjeIZrv/9NjfRoTcSw+oXoYSn26KL8knhhs3uzg4PrBU+/vG66Gd14ZsuOTRn+u39FHaPMKBxxwHpu+CKaZBOSRAmokSZwLgYEtZFU89/XQp9mKFMALVPVM30ZM+10cRsB5ICJEmDc8KpiZCwWrSRN+zEH+yAKgyhRJp+m6D2L25cBY6Dp3zq9UjtshVhbSyaKkn3VycpdtcrByhVrMFCIkHw/kbPFgn5t4lIeMW5DbhhrSTF4UoZItT2qla3vkNcmevSBW7P1W9HmxF/Ky1zJhEEu2A+ghqHhdgO5SU2HrvUa+aHlMP/kXX5HOl+sIMbKU/IyoCxkZnpxvaYD48zi7JvU5aXN4O2tW+B/DJz1/c85yPI/v339ndyeoPSR2pwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wOC0yOVQxMDozMzozMy0wNDowMMparxMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDgtMjlUMTA6MzM6MzItMDQ6MDAdcBwbAAAAAElFTkSuQmCC"

WG_EXECUTABLE=/usr/local/bin/wg-quick

WG_CONFIG="wg0-client"

WG_PIDFILE="/var/run/wireguard/$WG_CONFIG.name"

case "$1" in
    connect)
        sudo $WG_EXECUTABLE up $WG_CONFIG

        # Wait for connection so menu item refreshes instantly
        until [ -f $WG_PIDFILE ]; do sleep 1; done
        ;;
    disconnect)
        sudo $WG_EXECUTABLE down $WG_CONFIG

        # Wait for disconnection so menu item refreshes instantly
        until [ ! -f $WG_PIDFILE ]; do sleep 1; done
        ;;
esac

if [ -f $WG_PIDFILE ]; then
    echo "| templateImage=$WG_CONNECTED"
    echo '---'
    echo "Disconnect Wireguard | bash='$0' param1=disconnect terminal=false refresh=true"
    exit
else
    echo "| templateImage=$WG_DISCONNECTED"
    echo '---'
    echo "Connect Wireguard | bash='$0' param1=connect terminal=false refresh=true"
    exit
fi
